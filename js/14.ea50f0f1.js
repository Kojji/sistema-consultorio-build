(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{e996:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:""},model:{value:t.OpenModalUser,callback:function(e){t.OpenModalUser=e},expression:"OpenModalUser"}},[s("q-card",{staticStyle:{width:"600px"}},[s("q-card-section",{staticClass:"row items-center"},[s("q-space"),s("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.closeModal()}}})],1),t.usuario?s("q-card-section",{staticClass:"q-pt-none"},[s("div",{staticClass:"q-pt-none"},[s("div",{staticClass:"q-col-gutter-md row items-center"},[s("div",{staticClass:"col-12 text-center q-pt-none"},[s("q-avatar",{attrs:{size:"76px",color:t.usuario.photo?"":"secondary text-white"}},[t.usuario.photo?s("img",{attrs:{src:t.usuario.photo}}):s("span",[t._v("\n                "+t._s(t.sigla(t.usuario.name))+"\n              ")])]),s("h5",{staticClass:"q-my-xs"},[t._v(t._s(t.usuario.name))]),1==t.usuario.role?s("p",{staticClass:"text-caption q-mb-xs"},[t._v("\n              Administrador\n            ")]):t._e(),s("p",{staticClass:"text-caption q-mb-xs"},[t._v("\n              "+t._s(t.usuario.email)+"\n            ")]),s("p",{staticClass:"text-caption"},[t._v("\n              "+t._s(t.usuario.cpf)+"\n            ")]),s("div",{staticClass:"row"},[s("div",{staticClass:"q-mb-sm col"},[t.usuario.active?s("q-btn",{attrs:{"no-caps":"",loading:t.loadingAdminButton,dense:"",outline:"",color:"warning",label:"Resetar Senha"},on:{click:t.resetarSenha},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-spinner",{attrs:{color:"primary",size:".8em"}})]},proxy:!0}],null,!1,1493926367)}):t._e()],1),s("div",{staticClass:"q-mb-sm col"},[t.usuario.active?s("q-btn",{attrs:{"no-caps":"",disable:1==t.usuario.role,loading:t.loadingAdminButton,dense:"",outline:"",color:"warning",label:"Tornar Administrador"},on:{click:t.giveAdmin},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-spinner",{attrs:{color:"primary",size:".8em"}})]},proxy:!0}],null,!1,1493926367)}):t._e()],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-btn",{staticClass:"text-negative",attrs:{loading:t.decliningUser,icon:"close",round:"",dense:"",flat:"",disable:null!==t.usuario.confirmed&&!t.usuario.active},on:{click:function(e){return t.decline(t.usuario.active)}},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-spinner",{attrs:{color:"primary",size:".8em"}})]},proxy:!0}],null,!1,1493926367)},[s("q-tooltip",{attrs:{anchor:t.$q.screen.lt.md?"top middle":"bottom middle",self:t.$q.screen.lt.md?"bottom middle":"top middle","content-style":"font-size: 12px",offset:[10,10],"content-class":"bg-grey-8"}},[t._v(t._s(t.usuario.active?"Desativar Usuário":"Recusar Cadastro"))])],1)],1),s("div",{staticClass:"col"},[s("q-icon",{staticClass:"q-pa-xs",attrs:{size:"24px",name:"circle",color:t.checkColor(t.usuario.active)}},[s("q-tooltip",{attrs:{anchor:t.$q.screen.lt.md?"top middle":"bottom middle",self:t.$q.screen.lt.md?"bottom middle":"top middle","content-style":"font-size: 12px",offset:[10,10],"content-class":"bg-grey-8"}},[t._v(t._s(t.checkStatus(t.usuario.active)))])],1)],1),s("div",{staticClass:"col"},[s("q-btn",{staticClass:"text-positive",attrs:{loading:t.acceptingUser,icon:"check",round:"",dense:"",flat:"",disable:t.usuario.confirmed&&t.usuario.active},on:{click:function(e){return t.accept()}},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-spinner",{attrs:{color:"primary",size:".8em"}})]},proxy:!0}],null,!1,1493926367)},[s("q-tooltip",{attrs:{anchor:t.$q.screen.lt.md?"top middle":"bottom middle",self:t.$q.screen.lt.md?"bottom middle":"top middle","content-style":"font-size: 12px",offset:[10,10],"content-class":"bg-grey-8"}},[t._v(t._s(t.usuario.confirmed?"Reativar Usuário":"Aceitar Cadastro"))])],1)],1)])],1)])])]):s("q-card-section",{staticStyle:{height:"300px"}}),s("q-inner-loading",{attrs:{showing:t.loadingUser}},[s("q-spinner",{attrs:{color:"primary",size:"3em"}}),s("p",{staticClass:"q-mt-md"},[t._v("Trazendo informações do usuário...")])],1)],1)],1)},o=[],a=(s("b0c0"),s("d3b7"),s("e6cf"),s("a79d"),s("ac1f"),s("1276"),{name:"modalShowUser",props:{OpenModal:{type:Boolean,default:!1}},data:function(){return{loadingUser:!1,acceptingUser:!1,decliningUser:!1,loadingAdminButton:!1,usuario:null}},methods:{checkStatus:function(t){return!0===t?"Usuário Ativo":"Usuário Inativo"},checkColor:function(t){return!0===t?"positive":"negative"},accept:function(){var t=this;this.acceptingUser=!0;var e={name:this.usuario.name,username:this.usuario.username,birthday:this.usuario.birthday,email:this.usuario.email,cpf:this.usuario.cpf,confirmed:!0,active:!0};this.$axios.put("users/edit/"+this.usuario.id,e).then((function(e){e.data.success&&(t.$q.notify({message:e.data.message,color:"green",position:"top-right"}),t.$emit("repaginate"),t.getUser())})).catch((function(e){t.$q.notify({message:e.response.data.message,color:"red",position:"top-right"})})).finally((function(){t.acceptingUser=!1,t.closeModal()}))},decline:function(t){var e=this;this.decliningUser=!0;var s={name:this.usuario.name,username:this.usuario.username,birthday:this.usuario.birthday,email:this.usuario.email,cpf:this.usuario.cpf,confirmed:t,active:!1};this.$axios.put("users/edit/"+this.usuario.id,s).then((function(t){t.data.success&&(e.$q.notify({message:t.data.message,color:"green",position:"top-right"}),e.$emit("repaginate"),e.getUser())})).catch((function(t){e.$q.notify({message:t.response.data.message,color:"red",position:"top-right"})})).finally((function(){e.decliningUser=!1,e.closeModal()}))},giveAdmin:function(){var t=this;this.$q.dialog({title:this.usuario.name,message:"Tem certeza que deseja tornar usuário em administrador?",cancel:"Cancelar",persistent:!0}).onOk((function(){t.$q.loading.show()})).onOk((function(){t.loadingAdminButton=!0;var e={name:t.usuario.name,username:t.usuario.username,birthday:t.usuario.birthday,email:t.usuario.email,cpf:t.usuario.cpf,confirmed:t.usuario.confirmed,active:t.usuario.active,role:1};t.$axios.put("users/edit/"+t.usuario.id,e).then((function(e){e.data.success&&(t.$q.notify({message:e.data.message,color:"green",position:"top-right"}),t.$emit("repaginate"),t.getUser())})).catch((function(e){t.$q.notify({message:e.response.data.message,color:"red",position:"top-right"})})).finally((function(){t.loadingAdminButton=!1,t.closeModal()}))})).onCancel((function(){t.$q.loading.hide()})).onDismiss((function(){t.$q.loading.hide()}))},resetarSenha:function(){var t=this;this.$q.dialog({title:this.usuario.name,message:"Tem certeza que deseja retomar a senha padrão ao usuário?",cancel:"Cancelar",persistent:!0}).onOk((function(){t.$q.loading.show()})).onOk((function(){t.loadingAdminButton=!0,t.$axios.post("/users/reset/"+t.usuario.id,{}).then((function(e){e.data.success&&(t.$q.notify({message:e.data.message,color:"green",position:"top-right"}),t.$emit("repaginate"),t.getUser())})).catch((function(e){t.$q.dialog({title:e.response.data.message,class:"bg-negative text-white",ok:{"text-color":"red",color:"white"}})})).finally((function(){t.loadingAdminButton=!1,t.closeModal()}))})).onCancel((function(){t.$q.loading.hide()})).onDismiss((function(){t.$q.loading.hide()}))},getUser:function(){var t=this;this.loadingUser=!0,this.$axios.get("/users/user/"+this.userId).then((function(e){e.data.success&&(t.usuario=e.data.user)})).finally((function(){t.loadingUser=!1}))},sigla:function(t){var e=String(t),s=e.split(" ");return s[0][0]+s[s.length-1][0]},closeModal:function(){this.$emit("closeModal"),this.usuario=null,this.$store.commit("users/setSelectedUserId",null)}},computed:{OpenModalUser:{get:function(){return this.OpenModal}},userId:{get:function(){return this.$store.getters["users/getSelectedUserId"]},set:function(t){this.$store.commit("users/setSelectedUserId",t)}}},mounted:function(){this.getUser()}}),n=a,r=s("2877"),c=s("24e8"),u=s("f09f"),l=s("a370"),d=s("2c91"),m=s("9c40"),p=s("cb32"),g=s("0d59"),f=s("05c0"),h=s("0016"),q=s("74f7"),v=s("eebe"),y=s.n(v),b=Object(r["a"])(n,i,o,!1,null,"268d7164",null);e["default"]=b.exports;y()(b,"components",{QDialog:c["a"],QCard:u["a"],QCardSection:l["a"],QSpace:d["a"],QBtn:m["a"],QAvatar:p["a"],QSpinner:g["a"],QTooltip:f["a"],QIcon:h["a"],QInnerLoading:q["a"]})}}]);