(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{5499:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{persistent:""},model:{value:e.OpenModalFicha,callback:function(t){e.OpenModalFicha=t},expression:"OpenModalFicha"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"row items-center"},[a("div",{staticClass:"text-h6"},[e._v("Editar Ficha")]),a("q-space"),a("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(t){return e.closeModal()}}})],1),e.paciente?a("q-card-section",{staticClass:"q-pt-none"},[a("div",{staticClass:"q-pt-none"},[a("div",{staticClass:"q-col-gutter-md row"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Nome"},model:{value:e.paciente.name,callback:function(t){e.$set(e.paciente,"name",t)},expression:"paciente.name"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{dense:"",outlined:"",label:"CPF",mask:"###.###.###-##"},model:{value:e.paciente.cpf,callback:function(t){e.$set(e.paciente,"cpf",t)},expression:"paciente.cpf"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{directives:[{name:"mask",rawName:"v-mask",value:["(##)####-####","(##)#####-####"],expression:"['(##)####-####', '(##)#####-####']"}],attrs:{dense:"",outlined:"",label:"Telefone"},model:{value:e.paciente.phone,callback:function(t){e.$set(e.paciente,"phone",t)},expression:"paciente.phone"}})],1),a("div",{staticClass:"col-12"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Pasta"},model:{value:e.paciente.externalFile,callback:function(t){e.$set(e.paciente,"externalFile",t)},expression:"paciente.externalFile"}})],1),a("div",{staticClass:"col-12 q-gutter-sm",attrs:{align:"center"}},[a("q-radio",{attrs:{val:!0,label:"Arquivo Ativo"},model:{value:e.paciente.active,callback:function(t){e.$set(e.paciente,"active",t)},expression:"paciente.active"}}),a("q-radio",{attrs:{val:!1,label:"Arquivo Morto"},model:{value:e.paciente.active,callback:function(t){e.$set(e.paciente,"active",t)},expression:"paciente.active"}})],1),a("div",{staticClass:"col-12 q-gutter-sm q-py-none",attrs:{align:"center"}},[a("q-checkbox",{attrs:{label:"Emitir Nota"},model:{value:e.paciente.emitReceipt,callback:function(t){e.$set(e.paciente,"emitReceipt",t)},expression:"paciente.emitReceipt"}})],1),e.paciente.emitReceipt?a("div",{staticClass:"q-col-gutter-sm row"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Email"},model:{value:e.paciente.email,callback:function(t){e.$set(e.paciente,"email",t)},expression:"paciente.email"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{dense:"",outlined:"",label:"CEP",mask:"#####-###"},scopedSlots:e._u([e.paciente.postalCode?{key:"append",fn:function(){return[a("q-btn",{staticClass:"cursor-pointer",attrs:{loading:e.loadingCEP,disable:e.loadingCEP,name:"search",clickable:"",icon:"search",outline:"",dense:"",color:"positive"},on:{click:function(t){return t.stopPropagation(),e.procuraCEP(e.paciente.postalCode)}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner",{attrs:{color:"white",size:".8em"}})]},proxy:!0}],null,!1,2624377428)})]},proxy:!0}:null],null,!0),model:{value:e.paciente.postalCode,callback:function(t){e.$set(e.paciente,"postalCode",t)},expression:"paciente.postalCode"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Estado"},model:{value:e.paciente.state,callback:function(t){e.$set(e.paciente,"state",t)},expression:"paciente.state"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Cidade"},model:{value:e.paciente.city,callback:function(t){e.$set(e.paciente,"city",t)},expression:"paciente.city"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Bairro"},model:{value:e.paciente.block,callback:function(t){e.$set(e.paciente,"block",t)},expression:"paciente.block"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Rua"},model:{value:e.paciente.street,callback:function(t){e.$set(e.paciente,"street",t)},expression:"paciente.street"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{ref:"cnumero",attrs:{dense:"",outlined:"",label:"Número"},model:{value:e.paciente.number,callback:function(t){e.$set(e.paciente,"number",t)},expression:"paciente.number"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Complemento"},model:{value:e.paciente.extra,callback:function(t){e.$set(e.paciente,"extra",t)},expression:"paciente.extra"}})],1)]):e._e()])])]):e._e(),e.paciente?a("q-card-actions",{attrs:{align:"right"}},[a("div",{staticClass:"q-ma-sm q-gutter-xs"},[a("q-btn",{attrs:{"no-caps":"",loading:e.loadingMorto,dense:"",outline:"",color:e.paciente.active?"negative":"warning",label:e.paciente.active?"Editar e desativar":"Editar e reativar"},on:{click:function(t){return e.arquivoMorto(e.paciente.active)}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner",{attrs:{color:"primary",size:".8em"}})]},proxy:!0}],null,!1,1493926367)}),a("q-btn",{attrs:{"no-caps":"",loading:e.loadingSaving,dense:"",outline:"",color:"positive",label:"Editar"},on:{click:e.editFicha},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner",{attrs:{color:"primary",size:".8em"}})]},proxy:!0}],null,!1,1493926367)})],1)]):a("q-card-section",{staticStyle:{height:"300px"}}),a("q-inner-loading",{attrs:{showing:e.loadingFicha}},[a("q-spinner",{attrs:{color:"primary",size:"3em"}}),a("p",{staticClass:"q-mt-md"},[e._v("Trazendo informações do usuário...")])],1)],1)],1)},n=[],s=(a("b0c0"),a("d3b7"),a("e6cf"),a("a79d"),a("3a60")),c={name:"modalShowUser",props:{OpenModal:{type:Boolean,default:!1}},directives:{mask:s["mask"]},data:function(){return{loadingFicha:!1,loadingCEP:!1,loadingSaving:!1,loadingMorto:!1,paciente:null}},methods:{editFicha:function(){var e=this;this.loadingSaving=!0;var t={name:this.paciente.name,phone:this.paciente.phone,cpf:this.paciente.cpf,externalFile:this.paciente.externalFile,postalCode:this.paciente.postalCode,state:this.paciente.state,city:this.paciente.city,block:this.paciente.block,street:this.paciente.street,number:this.paciente.number,extra:this.paciente.extra,email:this.paciente.email,emitReceipt:this.paciente.emitReceipt,active:this.paciente.active};this.$axios.put("patients/patient/"+this.paciente.id,t).then((function(t){t.data.success&&(e.$q.notify({message:t.data.message,color:"green",position:"top-right"}),e.$emit("repaginate"))})).catch((function(t){e.$q.notify({message:t.response.data.message,color:"red",position:"top-right"})})).finally((function(){e.loadingSaving=!1,e.closeModal()}))},procuraCEP:function(e){var t=this;this.loadingCEP=!0,this.$axios.get("/utils/postalCode/"+e).then((function(e){e.data.success&&(t.$q.notify({message:e.data.message,color:"green",position:"top-right"}),t.paciente.state=e.data.data.uf,t.paciente.city=e.data.data.localidade,t.paciente.block=e.data.data.bairro,t.paciente.street=e.data.data.logradouro,t.paciente.extra=e.data.data.complemento,t.$refs.cnumero.focus())})).catch((function(e){t.$q.notify({message:e.response.data.message,color:"red",position:"top-right"})})).finally((function(){t.loadingCEP=!1}))},arquivoMorto:function(e){var t=this;this.$q.dialog({title:this.paciente.name,message:e?"Tem certeza que deseja mandar esta ficha ao Arquivo Morto?":"Tem certeza que deseja reativar esta ficha?",cancel:"Cancelar",persistent:!0}).onOk((function(){t.$q.loading.show()})).onOk((function(){t.loadingMorto=!0;var a={name:t.paciente.name,phone:t.paciente.phone,cpf:t.paciente.cpf,externalFile:t.paciente.externalFile,postalCode:t.paciente.postalCode,state:t.paciente.state,city:t.paciente.city,block:t.paciente.block,street:t.paciente.street,number:t.paciente.number,extra:t.paciente.extra,email:t.paciente.email,emitReceipt:t.paciente.emitReceipt,active:!e};t.$axios.put("patients/patient/"+t.paciente.id,a).then((function(e){e.data.success&&(t.$q.notify({message:e.data.message,color:"green",position:"top-right"}),t.$emit("repaginate"))})).catch((function(e){t.$q.notify({message:e.response.data.message,color:"red",position:"top-right"})})).finally((function(){t.loadingMorto=!1,t.closeModal()}))})).onCancel((function(){t.$q.loading.hide()})).onDismiss((function(){t.$q.loading.hide()}))},getFicha:function(){var e=this;this.loadingFicha=!0,this.$axios.get("/patients/patient/"+this.patientId).then((function(t){t.data.success&&(e.paciente=t.data.user)})).finally((function(){e.loadingFicha=!1}))},closeModal:function(){this.$emit("closeModal"),this.paciente=null,this.$store.commit("forms/setSelectedUserId",null)}},computed:{OpenModalFicha:{get:function(){return this.OpenModal}},patientId:{get:function(){return this.$store.getters["forms/getSelectedUserId"]},set:function(e){this.$store.commit("forms/setSelectedUserId",e)}}},mounted:function(){this.getFicha()}},o=c,l=a("2877"),r=a("24e8"),p=a("f09f"),d=a("a370"),u=a("2c91"),m=a("9c40"),f=a("27f9"),h=a("3786"),g=a("8f8e"),v=a("0d59"),b=a("4b7e"),q=a("74f7"),C=a("eebe"),x=a.n(C),k=Object(l["a"])(o,i,n,!1,null,"09b1304c",null);t["default"]=k.exports;x()(k,"components",{QDialog:r["a"],QCard:p["a"],QCardSection:d["a"],QSpace:u["a"],QBtn:m["a"],QInput:f["a"],QRadio:h["a"],QCheckbox:g["a"],QSpinner:v["a"],QCardActions:b["a"],QInnerLoading:q["a"]})}}]);