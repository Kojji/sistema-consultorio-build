(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"2ff9":function(e,a,s){"use strict";s.r(a);var t=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"q-col-gutter-md row"},[s("div",{staticClass:"col-12 col-md-6 offset-md-3"},[s("q-card",[s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{color:e.user.photo?"":"secondary text-white"}},[e.user.photo?s("img",{attrs:{contain:"",src:e.user.photo}}):s("span",{staticClass:"text-accent"},[e._v(e._s(e.sigla(e.user.name)))])])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.user.name))])],1),s("q-item-section",{attrs:{side:""}})],1),s("q-separator"),s("q-card-section",{staticClass:"q-pa-none"},[s("q-splitter",{attrs:{limits:[e.splitterModel,e.splitterModel],horizontal:e.$q.screen.lt.md},scopedSlots:e._u([{key:"before",fn:function(){return[s("q-tabs",{staticClass:"text-accent",attrs:{"no-caps":"",vertical:e.$q.screen.gt.sm},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[s("q-tab",{staticClass:"text-left",attrs:{name:"infos",label:"Informações"}}),s("q-tab",{staticClass:"text-left",attrs:{name:"acesso",label:"Conta"}})],1)]},proxy:!0},{key:"after",fn:function(){return[s("q-tab-panels",{attrs:{animated:"","transition-prev":"jump-down","transition-next":"jump-up"},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[s("q-tab-panel",{staticClass:"q-pl-none q-pr-none",attrs:{name:"infos"}},[s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"q-col-gutter-md row"},[s("div",{staticClass:"col-12"},[s("q-input",{attrs:{disable:e.saving,outlined:"",label:"Nome",dense:""},model:{value:e.usuario.name,callback:function(a){e.$set(e.usuario,"name",a)},expression:"usuario.name"}})],1),s("div",{staticClass:"col-12 col-md-6"},[s("q-input",{attrs:{disable:e.saving,outlined:"",label:"Data de Nascimento",dense:"",mask:"##/##/####"},model:{value:e.usuario.birthday,callback:function(a){e.$set(e.usuario,"birthday",a)},expression:"usuario.birthday"}})],1),s("div",{staticClass:"col-12 col-md-6"},[s("q-input",{attrs:{disable:e.saving,outlined:"",label:"CPF",dense:"",mask:"###.###.###-##"},model:{value:e.usuario.cpf,callback:function(a){e.$set(e.usuario,"cpf",a)},expression:"usuario.cpf"}})],1),s("div",{staticClass:"col-12 text-right"},[s("q-btn",{attrs:{loading:e.saving,label:"Salvar",outline:"","no-caps":"","no-wrap":"",color:"positive"},on:{click:e.updateInfos}})],1)])])]),s("q-tab-panel",{staticClass:"q-pl-none q-pr-none",attrs:{name:"acesso"}},[s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"q-col-gutter-md row"},[s("div",{staticClass:"col-12 q-pt-none"},[s("div",{staticClass:"text-h6"},[e._v("\n                          Troque sua senha\n                        ")]),s("q-separator")],1),s("div",{staticClass:"col-12"},[s("div",{staticClass:"q-col-gutter-md row"},[s("div",{staticClass:"col-12 col-md-6"},[s("q-input",{attrs:{disable:e.saving,dense:"",outlined:"",type:"password",label:"Senha atual"},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}})],1)])]),s("div",{staticClass:"col-12 col-md-6"},[s("q-input",{attrs:{disable:e.saving,dense:"",outlined:"",type:"password",label:"Nova senha"},on:{input:function(a){return e.countPwdRules(a)}},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"help_outline"}}),s("q-tooltip",{attrs:{anchor:e.$q.screen.lt.md?"top middle":"bottom middle",self:e.$q.screen.lt.md?"bottom middle":"top middle","content-style":"font-size: 12px",offset:[10,10],"content-class":"bg-grey-8"}},[e._v("\n                              A senha precisa conter:"),s("br"),s("q-icon",{attrs:{name:e.pwdRules.r1?"check":"close"}}),e._v(" Pelo menos uma letra"),s("br"),s("q-icon",{attrs:{name:e.pwdRules.r2?"check":"close"}}),e._v(" Pelo menos um número"),s("br"),s("q-icon",{attrs:{name:e.pwdRules.r3?"check":"close"}}),e._v(" No mínimo 6 caracteres.\n                            ")],1)]},proxy:!0}]),model:{value:e.new_password,callback:function(a){e.new_password=a},expression:"new_password"}}),s("div",{staticClass:"q-pl-md q-pr-md q-pt-none"},[s("q-linear-progress",{staticClass:"q-mt-md",attrs:{reverse:"",value:e.pwdRules.value,color:"grey-3"}}),s("p",{staticClass:"text-caption text-left"},[e._v("Requisitos da Senha")])],1)],1),s("div",{staticClass:"col-12 col-md-6"},[s("q-input",{attrs:{disable:e.saving,dense:"",outlined:"",type:"password",label:"Repita a nova senha",rules:[e.checkPwd]},model:{value:e.confirm_password,callback:function(a){e.confirm_password=a},expression:"confirm_password"}})],1),s("div",{staticClass:"col-12 text-right"},[s("q-btn",{attrs:{loading:e.saving,outline:"",label:"Salvar","no-caps":"","no-wrap":"",color:"green"},on:{click:e.updatePassword}})],1)]),s("div",{staticClass:"q-col-gutter-md row"},[s("div",{staticClass:"col-12 q-pt-none"},[s("div",{staticClass:"text-h6"},[e._v("\n                          Troque seu login\n                        ")]),s("q-separator")],1),s("div",{staticClass:"col-12"},[s("div",{staticClass:"q-col-gutter-md row"},[s("div",{staticClass:"col-12 col-md-6"},[s("q-input",{attrs:{disable:e.saving,dense:"",outlined:"",type:"password",label:"Senha atual"},model:{value:e.password2,callback:function(a){e.password2=a},expression:"password2"}})],1)])]),s("div",{staticClass:"col-12"},[s("div",{staticClass:"q-col-gutter-md row"},[s("div",{staticClass:"col-12 col-md-6"},[s("q-input",{attrs:{disable:e.saving,dense:"",outlined:"",label:"Endereço de email"},model:{value:e.usuario.email,callback:function(a){e.$set(e.usuario,"email",a)},expression:"usuario.email"}})],1),s("div",{staticClass:"col-12 col-md-6"},[s("q-input",{attrs:{disable:e.saving,outlined:"",label:"Login",dense:""},model:{value:e.usuario.username,callback:function(a){e.$set(e.usuario,"username",a)},expression:"usuario.username"}})],1)])]),s("div",{staticClass:"col-12 text-right"},[s("q-btn",{attrs:{loading:e.saving,outline:"",label:"Salvar","no-caps":"","no-wrap":"",color:"green"},on:{click:e.updateLogin}})],1)])])])],1)]},proxy:!0}]),model:{value:e.splitterModel,callback:function(a){e.splitterModel=a},expression:"splitterModel"}})],1)],1)],1)])},o=[],n=s("c973"),i=s.n(n),r=(s("96cf"),s("ac1f"),s("1276"),s("b0c0"),s("d3b7"),s("e6cf"),s("a79d"),s("cca6"),{name:"Profile",meta:{title:"Cadastra-Re",titleTemplate:function(e){return"".concat(e," - Perfil")}},data:function(){return{tab:"infos",usuario:{},showCamera:!1,showPhoto:!0,uploadingPhoto:!1,file:null,password:"",password2:"",new_password:"",confirm_password:"",pwdRules:{value:1,r1:!1,r2:!1,r3:!1},saving:!1}},methods:{sigla:function(e){var a=String(e),s=a.split(" ");return s[0][0]+s[s.length-1][0]},getAreas:function(){var e=this;this.$axios.get("/areas").then((function(a){a.data.success&&(e.areas=a.data.data)}))},updateInfos:function(){var e=this;this.$q.dialog({title:this.user.name,message:"Tem certeza que deseja atualizar as informações básicas do seu usuário?",cancel:"Cancelar",persistent:!0}).onOk((function(){e.$q.loading.show()})).onOk((function(){e.saving=!0;var a={name:e.usuario.name,birthday:e.usuario.birthday,cpf:e.usuario.cpf};e.$axios.put("/users/user/"+e.user.id,a).then((function(s){s.data.success&&(e.$q.dialog({title:s.data.message,class:"bg-positive text-white",ok:{"text-color":"green",color:"white"}}),Object.assign(e.user,a))})).catch((function(a){e.$q.dialog({title:a.response.data.message,class:"bg-negative text-white",ok:{"text-color":"red",color:"white"}})})).finally((function(){e.saving=!1}))})).onCancel((function(){e.$q.loading.hide()})).onDismiss((function(){e.$q.loading.hide()}))},updateLogin:function(){var e=this;this.$q.dialog({title:"Troca de login",message:"Tem certeza que deseja atualizar suas informações de acesso?",cancel:"Cancelar",persistent:!0}).onOk((function(){e.$q.loading.show()})).onOk((function(){e.saving=!0,e.$axios.post("/users/change-login",{oldPassword:e.password2,email:e.usuario.email,username:e.usuario.username}).then((function(a){a.data.success&&(e.$q.notify({message:a.data.message,color:"green",position:"top-right",icon:"mdi-tooltip-check-outline"}),e.password2="",Object.assign(e.user,{email:e.usuario.email,username:e.usuario.username}))})).catch((function(a){e.$q.notify({message:a.response.data.message,color:"red",position:"top-right",icon:"mdi-alert"})})).finally((function(){e.saving=!1}))})).onCancel((function(){e.$q.loading.hide()})).onDismiss((function(){e.$q.loading.hide()}))},updatePassword:function(){var e=this;this.$q.dialog({title:"Troca de senha",message:"Tem certeza que deseja atualizar suas informações de acesso?",cancel:"Cancelar",persistent:!0}).onOk((function(){e.$q.loading.show()})).onOk((function(){e.saving=!0,e.$axios.post("/users/change-password",{oldPassword:e.password,password:e.new_password}).then((function(a){a.data.success&&(e.$q.notify({message:a.data.message,color:"green",position:"top-right",icon:"mdi-tooltip-check-outline"}),e.password="",e.new_password="",e.confirm_password="")})).catch((function(a){e.$q.notify({message:a.response.data.message,color:"red",position:"top-right",icon:"mdi-alert"})})).finally((function(){e.saving=!1}))})).onCancel((function(){e.$q.loading.hide()})).onDismiss((function(){e.$q.loading.hide()}))},uploadImage:function(e){var a=this;this.uploadingPhoto=!0;var s=new FormData;s.append("file",e),this.$axios.post("/users/upload/"+this.user.id,s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){e.data.success&&(a.$q.notify({message:e.data.message,color:"green",position:"top-right",icon:"mdi-tooltip-check-outline"}),a.user.photo=e.data.url_storage)})).catch((function(e){a.$q.notify({message:e.response.data.message,color:"red",position:"top-right",icon:"mdi-alert"})})).finally((function(){a.uploadingPhoto=!1}))},countPwdRules:function(e){0===e.length&&(this.pwdRules.value=1),this.pwdRules.r1=e.length>=6;var a=/[a-zA-Z]/;this.pwdRules.r2=a.test(e);var s=/[0-9]/;this.pwdRules.r3=s.test(e),this.pwdRules.value=this.getBarValue(this.pwdRules.r1,this.pwdRules.r2,this.pwdRules.r3)},getBarValue:function(e,a,s){return e&&a&&s?0:e&&a&&!s||e&&!a&&s?.25:!e||a||s?!e&&a&&s?.5:(e||!a||s)&&(e||a||!s)?1:.75:.5},checkPwd:function(){return this.new_password===this.confirm_password||"As senhas não coincidem."},addArea:function(e){var a=this;return i()(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a.$axios.post("/users/areas/".concat(e.id));case 2:case"end":return s.stop()}}),s)})))()},removeArea:function(e){var a=this;return i()(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a.$axios.delete("/users/areas/".concat(e.id));case 2:case"end":return s.stop()}}),s)})))()}},computed:{splitterModel:function(){return this.$q.screen.gt.md?20:25},user:{get:function(){return this.$store.getters["login/user"]},set:function(e){this.$store.commit("login/user",e)}}},mounted:function(){this.usuario=JSON.parse(JSON.stringify(this.user))}}),l=r,c=(s("cf4a"),s("2877")),u=s("f09f"),d=s("66e5"),p=s("4074"),m=s("cb32"),f=s("9c40"),g=s("05c0"),h=s("7d53"),v=s("0170"),w=s("eb85"),q=s("a370"),b=s("8562"),C=s("429b"),x=s("7460"),k=s("adad"),$=s("823b"),y=s("27f9"),_=s("0016"),R=s("6b1d"),P=s("eebe"),Q=s.n(P),S=Object(c["a"])(l,t,o,!1,null,null,null);a["default"]=S.exports;Q()(S,"components",{QCard:u["a"],QItem:d["a"],QItemSection:p["a"],QAvatar:m["a"],QBtn:f["a"],QTooltip:g["a"],QFile:h["a"],QItemLabel:v["a"],QSeparator:w["a"],QCardSection:q["a"],QSplitter:b["a"],QTabs:C["a"],QTab:x["a"],QTabPanels:k["a"],QTabPanel:$["a"],QInput:y["a"],QIcon:_["a"],QLinearProgress:R["a"]})},"4f2e":function(e,a,s){},cf4a:function(e,a,s){"use strict";s("4f2e")}}]);