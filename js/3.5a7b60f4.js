(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0668":function(e,t,a){},"47b7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-col-gutter-md row q-ma-xs"},[a("div",{staticClass:"col-12"},[a("q-card",[a("q-toolbar",{staticClass:"q-pl-md"},[a("q-toolbar-title",{staticClass:"text-h6 text-weight-regular"},[e._v("\n          Agenda de Consultas\n        ")]),a("q-space"),a("div",{staticClass:"q-gutter-sm row items-center"},[a("q-input",{attrs:{outlined:"",dense:"",label:"Data"},on:{click:function(t){return t.stopPropagation(),e.openModalSelect.apply(null,arguments)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"},on:{click:function(t){return t.stopPropagation(),e.openModalSelect.apply(null,arguments)}}})]},proxy:!0}]),model:{value:e.inputDate,callback:function(t){e.inputDate=t},expression:"inputDate"}}),a("q-btn",{attrs:{color:"accent",dense:"",round:"",icon:"navigate_before"},on:{click:e.calendarPrev}}),a("q-select",{attrs:{outlined:"",dense:"","map-options":"","emit-value":"",options:e.agendaOptionInterval},model:{value:e.interval,callback:function(t){e.interval=t},expression:"interval"}}),a("q-btn",{attrs:{color:"accent",dense:"",round:"",icon:"navigate_next"},on:{click:e.calendarNext}})],1)],1),a("q-calendar",{ref:"calendar",staticClass:"calendar-container",style:e.style,attrs:{color:"primary","hour24-format":"","disabled-weekdays":[0],view:e.interval,locale:e.agendaLocale,"interval-start":e.agendaIntervalStart,"interval-minutes":e.agendaIntervalMinutes,"interval-count":e.agendaIntervalCount,"interval-height":e.agendaIntervalheight},on:{"click:interval2":e.addEventMenu,"click:time2":e.addEventMenu,"click:day2":e.addEventMenu,"click:week2":e.addEventMenu},scopedSlots:e._u([{key:"day",fn:function(t){var n=t.timestamp;return[e._l(e.showEvents(n.date),(function(t,n){return[a("q-badge",{key:n,class:e.badgeClasses(t,"day"),staticStyle:{width:"100%",cursor:"pointer",height:"16px","max-height":"16px"},style:e.badgeStyles(t,"day")},[a("span",{staticClass:"ellipsis"},[e._v(e._s(t.title))])])]}))]}},{key:"day-header",fn:function(t){var n=t.timestamp;return[e.verifyToday(n.date)?a("div",{staticClass:"row justify-center"},[a("q-badge",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{color:"secondary"}})],1):e._e()]}},{key:"day-body",fn:function(t){var n=t.timestamp,r=t.timeStartPos,s=t.timeDurationHeight;return[e._l(e.showEvents(n.date),(function(t,n){return[t.time?a("q-badge",{key:n,staticClass:"my-event justify-center",class:e.badgeClasses(t,"body"),style:e.badgeStyles(t,"body",r,s),on:{click:function(a){return a.stopPropagation(),e.openEditEvent(t)}}},[a("span",{staticClass:"ellipsis"},[e._v(e._s(t.title))])]):e._e()]}))]}}]),model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1),e.OpenModalSelectDate?a("modalSelectDate",{attrs:{OpenModal:e.OpenModalSelectDate,selectedDate:e.selectedDate},on:{closeModal:function(t){e.OpenModalSelectDate=!1},newDateSelected:function(t){return e.selectedDate=t}}}):e._e(),e.OpenModalEventForm?a("modalEventForm",{attrs:{OpenModal:e.OpenModalEventForm,newEvent:e.isNewEvent},on:{closeModal:function(t){e.OpenModalEventForm=!1},repaginate:function(t){return e.listEvents()}}}):e._e()],1)])},r=[],s=a("9523"),o=a.n(s),i=a("c973"),c=a.n(i),l=a("ded3"),d=a.n(l),u=(a("96cf"),a("ac1f"),a("5319"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("159b"),a("99af"),a("466d"),a("a79d"),a("25f0"),a("fe7a")),p=a("2f62"),g=new Date,v=/^\s*rgb(a)?\s*\((\s*(\d+)\s*,\s*?){2}(\d+)\s*,?\s*([01]?\.?\d*?)?\s*\)\s*$/;function h(e){if("string"!==typeof e)throw new TypeError("Expected a string");var t=v.exec(e);if(t){var a={r:Math.min(255,parseInt(t[2],10)),g:Math.min(255,parseInt(t[3],10)),b:Math.min(255,parseInt(t[4],10))};return t[1]&&(a.a=Math.min(1,parseFloat(t[5]))),a}return f(e)}function f(e){if("string"!==typeof e)throw new TypeError("Expected a string");e=e.replace(/^#/,""),3===e.length?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:4===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var t=parseInt(e,16);return e.length>6?{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:Math.round((255&t)/2.55)}:{r:t>>16,g:t>>8&255,b:255&t}}function m(e){if("string"!==typeof e&&(!e||void 0===e.r))throw new TypeError("Expected a string or a {r, g, b} object as color");var t="string"===typeof e?h(e):e,a=t.r/255,n=t.g/255,r=t.b/255,s=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),i=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4);return.2126*s+.7152*o+.0722*i}var b={name:"Agenda",meta:{title:"Cadastra-Re",titleTemplate:function(e){return"".concat(e," - Agenda de consultas")}},components:{modalSelectDate:function(){return Promise.all([a.e(0),a.e(10)]).then(a.bind(null,"6c6f"))},modalEventForm:function(){return Promise.all([a.e(0),a.e(9)]).then(a.bind(null,"9697"))}},data:function(){return{style:{"--calendar-border":"#047076 1px solid","--calendar-border-section":"#10564F 1px dashed","--calendar-border-current":"#047076 2px solid","--calendar-color":"#10564F","--calendar-disabled-date-color":"#047076","--calendar-disabled-date-background":"#bbbcbd","--calendar-active-date-color":"#1D1D1D","--calendar-active-date-background":"#93daca"},selectedDate:"",OpenModalSelectDate:!1,OpenModalEventForm:!1,isNewEvent:!0,interval:"week",pagination:{itemsPerPage:35,page:0}}},computed:d()(d()({},Object(p["b"])("agenda",["getEvents"])),{},{eventsMap:function(){var e={};return this.events.forEach((function(t){return(e[t.date]=e[t.date]||[]).push(t)})),e},inputDate:{get:function(){var e=new Date("".concat(this.selectedDate," 12:00"));return"".concat(e.getDate()<10?"0".concat(e.getDate()):e.getDate(),"/").concat(e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth()+1,"/").concat(e.getFullYear())},set:function(e){this.selectedDate=e}}}),methods:{calendarNext:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.calendar.next();case 2:e.listEvents();case 3:case"end":return t.stop()}}),t)})))()},calendarPrev:function(){var e=this;return c()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.calendar.prev();case 2:e.listEvents();case 3:case"end":return t.stop()}}),t)})))()},openModalSelect:function(){this.OpenModalSelectDate=!0,this.$store.commit("agenda/setSelectedDate",this.selectedDate)},verifyToday:function(e){var t=new Date(g),a=u["a"].parseDate(t);return e===a.date},openEditEvent:function(e){this.isNewEvent=!1,this.OpenModalEventForm=!0,this.$store.commit("agenda/setEditEvent",e)},addEventMenu:function(e){var t=e.scope;e.event;this.isNewEvent=!0,this.OpenModalEventForm=!0,this.$store.commit("agenda/setEditScope",t)},badgeClasses:function(e,t){var a,n=this.isCssColor(e.bgcolor),r="header"===t;return a={},o()(a,"text-white bg-".concat(e.bgcolor),!n),o()(a,"full-width",!r&&(!e.side||"full"===e.side)),o()(a,"left-side",!r&&"left"===e.side),o()(a,"right-side",!r&&"right"===e.side),a},isCssColor:function(e){return!!e&&!!e.match(/^(#|(rgb|hsl)a?\()/)},badgeStyles:function(e,t,a,n){var r={};return this.isCssColor(e.bgcolor)&&(r["background-color"]=e.bgcolor,r.color=m(e.bgcolor)>.5?"black":"white"),"day"!==t&&(r["border-style"]="solid",r["border-color"]="black"),a&&(r.top=a(e.time)+"px"),n&&(r.height=n(e.duration)+"px"),r["align-items"]="flex-start",r},listEvents:function(){var e=this,t=this.$refs.calendar.lastStart,a=this.$refs.calendar.lastEnd;this.$q.loading.show(),this.$axios.get("appointments?init="+t+"&final="+a).then((function(t){t.data.success&&e.$store.commit("agenda/setEvents",t.data.data)})).finally((function(){e.$q.loading.hide()}))},showEvents:function(e){for(var t=[],a=0;a<this.getEvents.length;++a){var n=!1;if(this.getEvents[a].date===e){if(this.getEvents[a].time&&t.length>0)for(var r=u["a"].parsed(this.getEvents[a].date+" "+this.getEvents[a].time),s=u["a"].addToDate(r,{minute:this.getEvents[a].duration}),o=0;o<t.length;++o)if(t[o].time){var i=u["a"].parsed(t[o].date+" "+t[o].time),c=u["a"].addToDate(i,{minute:1}),l=u["a"].addToDate(i,{minute:t[o].duration-1});if(u["a"].isBetweenDates(r,c,l,!0)||u["a"].isBetweenDates(s,c,l,!0)){t[o].side="left",this.getEvents[a].side="right",t.push(this.getEvents[a]),n=!0;break}}n||(this.getEvents[a].side=void 0,t.push(this.getEvents[a]))}}return t}},mounted:function(){var e=new Date;this.selectedDate="".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0"+(e.getMonth()+1).toString():(e.getMonth()+1).toString(),"-").concat(e.getDate()<10?"0"+e.getDate().toString():e.getDate().toString()),this.listEvents()}},E=b,w=(a("d970"),a("2877")),y=a("f09f"),D=a("65c6"),M=a("6ac5"),k=a("2c91"),x=a("27f9"),S=a("0016"),C=a("9c40"),q=a("ddd8"),_=a("58a81"),O=a("eebe"),F=a.n(O),$=Object(w["a"])(E,n,r,!1,null,null,null);t["default"]=$.exports;F()($,"components",{QCard:y["a"],QToolbar:D["a"],QToolbarTitle:M["a"],QSpace:k["a"],QInput:x["a"],QIcon:S["a"],QBtn:C["a"],QSelect:q["a"],QBadge:_["a"]})},d970:function(e,t,a){"use strict";a("0668")}}]);