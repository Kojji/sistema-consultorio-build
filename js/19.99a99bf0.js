(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{f981:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-col-gutter-md row q-ma-xs"},[n("div",{staticClass:"col-12"},[n("q-table",{attrs:{title:"Fichas de Pacientes",data:e.forms,columns:e.columns,"no-data-label":"Nenhuma ficha encontrada",pagination:{rowsPerPage:0}},scopedSlots:e._u([{key:"top",fn:function(){return[n("div",{staticClass:"q-table__control"},[n("div",{staticClass:"q-table__title"},[e._v("\n            Fichas de Pacientes\n            "),n("p",{staticClass:"text-caption"},[e._v("Mostrando "+e._s(e.forms.length)+" de "+e._s(e.pagination.count)+" "+e._s(e.pagination.count>1?"fichas":"ficha")+".")]),n("p",[n("q-btn",{staticClass:"text-accent q-pr-xs",attrs:{label:"Nova ficha",icon:"add",outline:"",dense:"","no-caps":"","no-wrap":""},on:{click:function(t){e.OpenModalNewFicha=!0}}})],1)])]),n("q-space"),n("q-input",{staticClass:"q-mr-md",attrs:{outlined:"",dense:"",label:"Buscar",placeholder:"CPF ou Nome"},on:{input:e.searchInput},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("q-btn",{staticClass:"q-ml-md",attrs:{flat:"","no-caps":"","no-wrap":"",color:e.filterActive?"accent":"warning",label:e.label}},[n("q-menu",[n("q-list",{staticStyle:{"min-width":"100px"}},e._l(e.options,(function(t,a){return n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:"group-option-"+a,class:{"bg-secondary":e.label===t.label},attrs:{clickable:""},on:{click:function(n){return e.changeFilter(t)}}},[n("q-item-section",[e._v(e._s(t.label))])],1)})),1)],1)],1)]},proxy:!0},{key:"body",fn:function(t){return[n("q-tr",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(n){return e.openUsuario(t.row.id)}}},[n("q-td",[e._v("\n            "+e._s(t.row.id)+"\n          ")]),n("q-td",[e._v("\n            "+e._s(t.row.name)+"\n          ")]),n("q-td",[e._v("\n            "+e._s(t.row.externalFile)+"\n          ")]),n("q-td",[e._v("\n            "+e._s(t.row.phone)+"\n          ")]),n("q-td",[e._v("\n            "+e._s(t.row.cpf)+"\n          ")]),n("q-td",[t.row.emitReceipt?n("q-icon",{attrs:{name:"done",size:"18px",color:"positive"}}):n("q-icon",{attrs:{name:"close",size:"18px",color:"negative"}})],1)],1)]}},{key:"bottom",fn:function(){return[n("div")]},proxy:!0}])}),e.OpenModalFicha?n("modalShowFicha",{ref:"showUsuario",attrs:{OpenModal:e.OpenModalFicha},on:{closeModal:function(t){e.OpenModalFicha=!1},repaginate:function(t){e.resetPagination(),e.getForms()}}}):e._e(),e.OpenModalNewFicha?n("modalCreateFicha",{attrs:{OpenModal:e.OpenModalNewFicha},on:{closeModal:function(t){e.OpenModalNewFicha=!1},repaginate:function(t){e.resetPagination(),e.getForms()},openModalCreatedFicha:function(t){return e.openUsuario(t)}}}):e._e()],1)])},o=[],i=(n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),n("b0c0"),n("a79d"),n("ac1f"),n("841c"),n("99af"),{name:"Forms",meta:{title:"Cadastra-Re",titleTemplate:function(e){return"".concat(e," - Fichas de pacientes")}},components:{modalShowFicha:function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"5499"))},modalCreateFicha:function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"98f3"))}},data:function(){return{OpenModalFicha:!1,OpenModalNewFicha:!1,filterActive:!0,forms:[],search:"",columns:[{name:"id",label:"ID",align:"left",field:function(e){return e.id},format:function(e){return"".concat(e)},sortable:!0},{name:"name",label:"Nome",align:"left",field:function(e){return e.name},format:function(e){return"".concat(e)},sortable:!0},{name:"externalFile",label:"Pasta",align:"left",field:function(e){return e.externalFile},format:function(e){return"".concat(e)},sortable:!1},{name:"phone",label:"Telefone",align:"left",field:function(e){return e.phone},format:function(e){return"".concat(e)},sortable:!0},{name:"cpf",label:"CPF",align:"left",field:function(e){return e.cpf},format:function(e){return"".concat(e)},sortable:!0},{name:"emitReceipt",label:"Nota Fiscal",align:"left",field:function(e){return e.emitReceipt},format:function(e){return"".concat(e)},sortable:!1}],pagination:{count:0,limit:20,nextPage:!0,offset:0,page:0},label:"Arquivo Ativo",options:[{label:"Arquivo Ativo",value:!0},{label:"Arquivo Morto",value:!1}]}},computed:{userId:{get:function(){return this.$store.getters["forms/getSelectedUserId"]},set:function(e){this.$store.commit("forms/setSelectedUserId",e)}}},methods:{searchInput:function(){this.resetPagination(),this.getForms()},getForms:function(){var e=this;this.$q.loading.show(),this.$axios.get("/patients",{params:{page:++this.pagination.page,active:this.filterActive,search:this.search}}).then((function(t){t.data.success&&(1===e.pagination.page?e.forms=t.data.patients:e.forms=e.forms.concat(t.data.patients),e.pagination=t.data.pagination)})).finally((function(){e.$q.loading.hide()}))},openUsuario:function(e){this.userId=e,this.OpenModalFicha=!0},resetPagination:function(){this.pagination={count:0,limit:20,nextPage:!0,offset:0,page:0},this.users=[]},changeFilter:function(e){this.label=e.label,this.filterActive=e.value,this.resetPagination(),this.getForms()},handleScroll:function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&this.getForms()}},mounted:function(){window.addEventListener("scroll",this.handleScroll),this.resetPagination(),this.getForms()},beforeRouteLeave:function(e,t,n){window.removeEventListener("scroll",this.handleScroll),n()}}),s=i,c=n("2877"),r=n("eaac"),l=n("9c40"),u=n("2c91"),d=n("27f9"),f=n("0016"),p=n("4e73"),m=n("1c1c"),h=n("66e5"),g=n("4074"),b=n("bd08"),v=n("db86"),w=n("7f67"),F=n("eebe"),q=n.n(F),_=Object(c["a"])(s,a,o,!1,null,null,null);t["default"]=_.exports;q()(_,"components",{QTable:r["a"],QBtn:l["a"],QSpace:u["a"],QInput:d["a"],QIcon:f["a"],QMenu:p["a"],QList:m["a"],QItem:h["a"],QItemSection:g["a"],QTr:b["a"],QTd:v["a"]}),q()(_,"directives",{ClosePopup:w["a"]})}}]);