(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{f981:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-col-gutter-md row q-ma-xs"},[a("div",{staticClass:"col-12"},[a("q-table",{attrs:{title:"Fichas de Pacientes",data:e.forms,columns:e.columns,"no-data-label":"Nenhuma ficha encontrada",pagination:{rowsPerPage:0}},scopedSlots:e._u([{key:"top",fn:function(){return[a("div",{staticClass:"q-table__control"},[a("div",{staticClass:"q-table__title"},[e._v("\n            Fichas de Pacientes\n            "),a("p",{staticClass:"text-caption"},[e._v("Mostrando "+e._s(e.forms.length)+" de "+e._s(e.pagination.count)+" "+e._s(e.pagination.count>1?"fichas":"ficha")+".")]),a("p",[a("q-btn",{staticClass:"text-accent q-pr-xs",attrs:{label:"Nova ficha",icon:"add",outline:"",dense:"","no-caps":"","no-wrap":""},on:{click:function(t){e.OpenModalNewFicha=!0}}})],1)])]),a("q-space"),a("q-input",{staticClass:"q-mr-md",attrs:{outlined:"",dense:"",label:"Buscar",placeholder:"CPF,Nome ou Pasta"},on:{input:e.searchInput},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("q-btn",{staticClass:"q-ml-md",attrs:{flat:"","no-caps":"","no-wrap":"",color:e.filterActive?"accent":"warning",label:e.label}},[a("q-menu",[a("q-list",{staticStyle:{"min-width":"100px"}},e._l(e.options,(function(t,n){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:"group-option-"+n,class:{"bg-secondary":e.label===t.label},attrs:{clickable:""},on:{click:function(a){return e.changeFilter(t)}}},[a("q-item-section",[e._v(e._s(t.label))])],1)})),1)],1)],1),a("div",{staticClass:"col-12"},[a("q-expansion-item",{staticStyle:{border:"2px solid #10564F"},attrs:{"expand-separator":"",icon:"reorder",label:"Ordenação e Listagem"},model:{value:e.searchExpand,callback:function(t){e.searchExpand=t},expression:"searchExpand"}},[a("q-card",[a("q-card-section",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-4"},[a("q-select",{attrs:{label:"Itens por página",options:e.optionsItensPerPage,outlined:"",dense:""},model:{value:e.itensPerPage,callback:function(t){e.itensPerPage=t},expression:"itensPerPage"}})],1),a("div",{staticClass:"col-4"},[a("q-select",{attrs:{label:"Ordenar por","emit-value":"","map-options":"",options:e.optionsListColumn,outlined:"",dense:""},model:{value:e.column,callback:function(t){e.column=t},expression:"column"}})],1),a("div",{staticClass:"col-4"},[a("q-select",{attrs:{label:"Ordem","emit-value":"","map-options":"",options:e.optionsListOrder,outlined:"",dense:""},model:{value:e.order,callback:function(t){e.order=t},expression:"order"}})],1),a("div",{staticClass:"col-12 row q-gutter-md justify-end"},[a("q-btn",{attrs:{outlined:"",label:"Limpar Filtros",color:"primary"},on:{click:function(t){return e.limparFiltros()}}}),a("q-btn",{attrs:{outlined:"",label:"Ordenar",color:"primary"},on:{click:function(t){return e.buscarPorFiltros()}}})],1)])],1)],1)],1)]},proxy:!0},{key:"body",fn:function(t){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.openUsuario(t.row.id)}}},[a("q-td",[e._v("\n            "+e._s(t.row.id)+"\n          ")]),a("q-td",[e._v("\n            "+e._s(t.row.name)+"\n          ")]),a("q-td",[e._v("\n            "+e._s(t.row.externalFile)+"\n          ")]),a("q-td",[e._v("\n            "+e._s(t.row.phone)+"\n          ")]),a("q-td",[e._v("\n            "+e._s(t.row.cpf)+"\n          ")]),a("q-td",[t.row.emitReceipt?a("q-icon",{attrs:{name:"done",size:"18px",color:"positive"}}):a("q-icon",{attrs:{name:"close",size:"18px",color:"negative"}})],1)],1)]}},{key:"bottom",fn:function(){return[a("div")]},proxy:!0}])}),a("div",{staticClass:"col-12 row q-my-md justify-center items-center"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{round:"",icon:"navigate_before",color:"primary",disable:e.pagination.page<=1},on:{click:function(t){e.pagination.page--,e.repaginateForms()}}}),a("q-input",{attrs:{dense:"",mask:"######",outlined:"",label:"Página( 1 a "+Math.ceil(e.pagination.count/e.pagination.limit)+" )"},on:{change:e.goToPage},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{round:"",icon:"navigate_next",color:"primary",disable:!e.pagination.nextPage},on:{click:function(t){e.pagination.page++,e.repaginateForms()}}})],1),e.OpenModalFicha?a("modalShowFicha",{ref:"showUsuario",attrs:{OpenModal:e.OpenModalFicha},on:{closeModal:function(t){e.OpenModalFicha=!1},repaginate:function(t){return e.repaginateForms()}}}):e._e(),e.OpenModalNewFicha?a("modalCreateFicha",{attrs:{OpenModal:e.OpenModalNewFicha},on:{closeModal:function(t){e.OpenModalNewFicha=!1},repaginate:function(t){return e.repaginateForms()},openModalCreatedFicha:function(t){return e.openUsuario(t)}}}):e._e()],1)])},i=[],o=(a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("b0c0"),a("a79d"),a("ac1f"),a("841c"),{name:"Forms",meta:{title:"Cadastra-Re",titleTemplate:function(e){return"".concat(e," - Fichas de pacientes")}},components:{modalShowFicha:function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,"5499"))},modalCreateFicha:function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,"98f3"))}},data:function(){return{OpenModalFicha:!1,OpenModalNewFicha:!1,filterActive:!0,forms:[],search:"",order:"ASC",column:"name",itensPerPage:20,searchExpand:!1,page:1,columns:[{name:"id",label:"ID",align:"left",field:function(e){return e.id},format:function(e){return"".concat(e)},sortable:!1},{name:"name",label:"Nome",align:"left",field:function(e){return e.name},format:function(e){return"".concat(e)},sortable:!1},{name:"externalFile",label:"Pasta",align:"left",field:function(e){return e.externalFile},format:function(e){return"".concat(e)},sortable:!1},{name:"phone",label:"Telefone",align:"left",field:function(e){return e.phone},format:function(e){return"".concat(e)},sortable:!1},{name:"cpf",label:"CPF",align:"left",field:function(e){return e.cpf},format:function(e){return"".concat(e)},sortable:!1},{name:"emitReceipt",label:"Nota Fiscal",align:"left",field:function(e){return e.emitReceipt},format:function(e){return"".concat(e)},sortable:!1}],pagination:{active:!0,search:"",column:"name",order:"ASC",count:0,limit:20,nextPage:!0,offset:0,page:1},label:"Arquivo Ativo",optionsListColumn:[{label:"ID",value:"id"},{label:"Nome",value:"name"},{label:"Pasta",value:"externalFile"}],optionsItensPerPage:[20,30,40,60],optionsListOrder:[{label:"Crescente",value:"ASC"},{label:"Decrescente",value:"DESC"}],options:[{label:"Arquivo Ativo",value:!0},{label:"Arquivo Morto",value:!1}]}},computed:{userId:{get:function(){return this.$store.getters["forms/getSelectedUserId"]},set:function(e){this.$store.commit("forms/setSelectedUserId",e)}}},methods:{repaginateForms:function(){var e=this;this.$q.loading.show(),this.forms=[],this.$axios.get("/patients",{params:{page:this.pagination.page,active:this.pagination.active,search:""===this.pagination.search?null:this.pagination.search,limit:this.pagination.limit,column:this.pagination.column,order:this.pagination.order}}).then((function(t){t.data.success&&(e.forms=t.data.patients,e.pagination=t.data.pagination,e.page=t.data.pagination.page)})).finally((function(){e.$q.loading.hide()}))},searchInput:function(){this.resetPagination(),this.pagination.search=this.search,this.repaginateForms()},limparFiltros:function(){this.column="name",this.order="ASC",this.itensPerPage=20,this.pagination={active:!0,search:"",column:"name",order:"ASC",count:0,limit:20,nextPage:!0,offset:0,page:1},this.repaginateForms(),this.searchExpand=!1},buscarPorFiltros:function(){this.pagination.column=this.column,this.pagination.order=this.order,this.pagination.limit=this.itensPerPage,this.pagination.page=1,this.pagination.search=this.search,this.repaginateForms(),this.searchExpand=!1},openUsuario:function(e){this.userId=e,this.OpenModalFicha=!0},changeFilter:function(e){this.label=e.label,this.filterActive=e.value,this.resetPagination(),this.pagination.active=e.value,this.repaginateForms()},goToPage:function(){this.page>Math.ceil(this.pagination.count/this.pagination.limit)&&this.pagination.page!==this.page?this.$q.notify({message:"Página Não encontrada",color:"red",position:"top-right"}):(this.pagination.page=this.page,this.repaginateForms())},resetPagination:function(){this.pagination={active:!0,search:"",column:"name",order:"ASC",count:0,limit:20,nextPage:!0,offset:0,page:1},this.forms=[]}},mounted:function(){this.resetPagination(),this.repaginateForms()}}),s=o,r=a("2877"),l=a("eaac"),c=a("9c40"),p=a("2c91"),u=a("27f9"),d=a("0016"),m=a("4e73"),h=a("1c1c"),f=a("66e5"),g=a("4074"),b=a("3b73"),v=a("f09f"),q=a("a370"),F=a("ddd8"),P=a("bd08"),x=a("db86"),C=a("7f67"),w=a("eebe"),_=a.n(w),k=Object(r["a"])(s,n,i,!1,null,null,null);t["default"]=k.exports;_()(k,"components",{QTable:l["a"],QBtn:c["a"],QSpace:p["a"],QInput:u["a"],QIcon:d["a"],QMenu:m["a"],QList:h["a"],QItem:f["a"],QItemSection:g["a"],QExpansionItem:b["a"],QCard:v["a"],QCardSection:q["a"],QSelect:F["a"],QTr:P["a"],QTd:x["a"]}),_()(k,"directives",{ClosePopup:C["a"]})}}]);