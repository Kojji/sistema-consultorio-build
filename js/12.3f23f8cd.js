(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"98f3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{persistent:""},model:{value:e.OpenModalFicha,callback:function(t){e.OpenModalFicha=t},expression:"OpenModalFicha"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"row items-center"},[a("div",{staticClass:"text-h6"},[e._v("Criar Ficha")]),a("q-space"),a("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(t){return e.closeModal()}}})],1),a("q-card-section",{staticClass:"q-pt-none"},[a("div",{staticClass:"q-pt-none"},[a("div",{staticClass:"q-col-gutter-sm row"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Nome"},model:{value:e.paciente.name,callback:function(t){e.$set(e.paciente,"name",t)},expression:"paciente.name"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{dense:"",outlined:"",label:"CPF",mask:"###.###.###-##"},model:{value:e.paciente.cpf,callback:function(t){e.$set(e.paciente,"cpf",t)},expression:"paciente.cpf"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{directives:[{name:"mask",rawName:"v-mask",value:["(##)####-####","(##)#####-####"],expression:"['(##)####-####', '(##)#####-####']"}],attrs:{dense:"",outlined:"",label:"Telefone"},model:{value:e.paciente.phone,callback:function(t){e.$set(e.paciente,"phone",t)},expression:"paciente.phone"}})],1),a("div",{staticClass:"col-12"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Pasta"},model:{value:e.paciente.externalFile,callback:function(t){e.$set(e.paciente,"externalFile",t)},expression:"paciente.externalFile"}})],1),a("div",{staticClass:"col-12 q-gutter-sm",attrs:{align:"center"}},[a("q-radio",{attrs:{val:!0,label:"Arquivo Ativo"},model:{value:e.paciente.active,callback:function(t){e.$set(e.paciente,"active",t)},expression:"paciente.active"}}),a("q-radio",{attrs:{val:!1,label:"Arquivo Morto"},model:{value:e.paciente.active,callback:function(t){e.$set(e.paciente,"active",t)},expression:"paciente.active"}})],1),a("div",{staticClass:"col-12 q-gutter-sm q-py-none",attrs:{align:"center"}},[a("q-checkbox",{attrs:{label:"Emitir Nota"},model:{value:e.paciente.emitReceipt,callback:function(t){e.$set(e.paciente,"emitReceipt",t)},expression:"paciente.emitReceipt"}})],1),e.paciente.emitReceipt?a("div",{staticClass:"q-col-gutter-sm row"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Email"},model:{value:e.paciente.email,callback:function(t){e.$set(e.paciente,"email",t)},expression:"paciente.email"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{dense:"",outlined:"",label:"CEP",mask:"#####-###"},scopedSlots:e._u([e.paciente.postalCode?{key:"append",fn:function(){return[a("q-btn",{staticClass:"cursor-pointer",attrs:{loading:e.loadingCEP,disable:e.loadingCEP,name:"search",clickable:"",icon:"search",outline:"",dense:"",color:"positive"},on:{click:function(t){return t.stopPropagation(),e.procuraCEP(e.paciente.postalCode)}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner",{attrs:{color:"white",size:".8em"}})]},proxy:!0}],null,!1,2624377428)})]},proxy:!0}:null],null,!0),model:{value:e.paciente.postalCode,callback:function(t){e.$set(e.paciente,"postalCode",t)},expression:"paciente.postalCode"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Estado"},model:{value:e.paciente.state,callback:function(t){e.$set(e.paciente,"state",t)},expression:"paciente.state"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Cidade"},model:{value:e.paciente.city,callback:function(t){e.$set(e.paciente,"city",t)},expression:"paciente.city"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Bairro"},model:{value:e.paciente.block,callback:function(t){e.$set(e.paciente,"block",t)},expression:"paciente.block"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Rua"},model:{value:e.paciente.street,callback:function(t){e.$set(e.paciente,"street",t)},expression:"paciente.street"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{ref:"cnumero",attrs:{dense:"",outlined:"",label:"NÃºmero"},model:{value:e.paciente.number,callback:function(t){e.$set(e.paciente,"number",t)},expression:"paciente.number"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Complemento"},model:{value:e.paciente.extra,callback:function(t){e.$set(e.paciente,"extra",t)},expression:"paciente.extra"}})],1)]):e._e()])])]),e.paciente?a("q-card-actions",{attrs:{align:"right"}},[a("div",{staticClass:"q-ma-sm q-gutter-xs"},[a("q-btn",{attrs:{"no-caps":"",loading:e.loadingSaving,dense:"",outline:"",color:"positive",label:"Criar"},on:{click:e.saveFicha},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner",{attrs:{color:"primary",size:".8em"}})]},proxy:!0}],null,!1,1493926367)})],1)]):e._e()],1)],1)},n=[],s=(a("b0c0"),a("d3b7"),a("e6cf"),a("a79d"),a("3a60")),c={name:"modalNewForm",props:{OpenModal:{type:Boolean,default:!1}},directives:{mask:s["mask"]},data:function(){return{loadingSaving:!1,loadingCEP:!1,paciente:{name:"",phone:"",cpf:"",externalFile:"",postalCode:"",state:"",city:"",block:"",street:"",number:null,extra:"",email:"",emitReceipt:!1,active:!0}}},methods:{saveFicha:function(){var e=this;this.loadingSaving=!0;var t={name:this.paciente.name,phone:this.paciente.phone,cpf:this.paciente.cpf,externalFile:this.paciente.externalFile,postalCode:this.paciente.postalCode,state:this.paciente.state,city:this.paciente.city,block:this.paciente.block,street:this.paciente.street,number:this.paciente.number,extra:this.paciente.extra,email:this.paciente.email,emitReceipt:this.paciente.emitReceipt,active:this.paciente.active};this.$axios.post("patients",t).then((function(t){t.data.success&&(e.$q.notify({message:t.data.message,color:"green",position:"top-right"}),e.$emit("repaginate"),e.$emit("openModalCreatedFicha",t.data.data.id))})).catch((function(t){e.$q.notify({message:t.response.data.message,color:"red",position:"top-right"})})).finally((function(){e.loadingSaving=!1,e.closeModal()}))},procuraCEP:function(e){var t=this;this.loadingCEP=!0,this.$axios.get("/utils/postalCode/"+e).then((function(e){e.data.success&&(t.$q.notify({message:e.data.message,color:"green",position:"top-right"}),t.paciente.state=e.data.data.uf,t.paciente.city=e.data.data.localidade,t.paciente.block=e.data.data.bairro,t.paciente.street=e.data.data.logradouro,t.paciente.extra=e.data.data.complemento,t.$refs.cnumero.focus())})).catch((function(e){t.$q.notify({message:e.response.data.message,color:"red",position:"top-right"})})).finally((function(){t.loadingCEP=!1}))},closeModal:function(){this.$emit("closeModal"),this.paciente=null}},computed:{OpenModalFicha:{get:function(){return this.OpenModal}}}},o=c,l=a("2877"),p=a("24e8"),r=a("f09f"),d=a("a370"),u=a("2c91"),m=a("9c40"),v=a("27f9"),f=a("3786"),b=a("8f8e"),h=a("0d59"),C=a("4b7e"),g=a("eebe"),q=a.n(g),x=Object(l["a"])(o,i,n,!1,null,"5d57db45",null);t["default"]=x.exports;q()(x,"components",{QDialog:p["a"],QCard:r["a"],QCardSection:d["a"],QSpace:u["a"],QBtn:m["a"],QInput:v["a"],QRadio:f["a"],QCheckbox:b["a"],QSpinner:h["a"],QCardActions:C["a"]})}}]);